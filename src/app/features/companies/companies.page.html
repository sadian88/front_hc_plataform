<section class="space-y-6">
  <header class="flex flex-wrap items-center justify-between gap-4">
    <div>
      <p class="text-sm uppercase tracking-wide text-night-500">Gestión</p>
      <h1 class="text-3xl font-semibold text-night-100">Compañías</h1>
      <p class="text-night-400">{{ statusMessage() }}</p>
    </div>
    <button class="btn-primary" type="button" (click)="startCreate()">
      Agregar compañía
    </button>
  </header>

  <article class="glass-card card-primary space-y-4">
    <p-table
      class="company-table"
      [value]="rowData()"
      [loading]="loading()"
      responsiveLayout="scroll"
      dataKey="id">
      <ng-template pTemplate="header">
        <tr>
          <th>Empresa</th>
          <th>Segmento</th>
          <th>Perfil corporativo</th>
          <th>Perfil cliente</th>
          <th>ICP</th>
          <th>Creación</th>
          <th class="actions-column">Acciones</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-company>
        <tr>
          <td>
            <div class="flex flex-col">
              <span class="font-semibold text-night-100">{{ company.company_name }}</span>
              <small class="text-night-500">#{{ company.id }}</small>
            </div>
          </td>
          <td>
            <span class="pill">{{ company.company_segment || 'Sin segmento' }}</span>
          </td>
          <td>
            <a class="link" [href]="company.company_url_profile" target="_blank" rel="noopener">
              {{ company.company_url_profile }}
            </a>
          </td>
          <td>
            <a class="link" [href]="company.customer_url_profile" target="_blank" rel="noopener">
              {{ company.customer_url_profile || 'N/A' }}
            </a>
          </td>
          <td>
            <span class="text-secondary">{{ company.company_icp || 'N/A' }}</span>
          </td>
          <td>{{ company.creation_date || 'N/A' }}</td>
          <td class="actions-column">
            <button type="button" class="action-btn" (click)="startEdit(company)">Editar</button>
            <button type="button" class="action-btn action-btn--danger" (click)="deleteCompany(company)">
              Eliminar
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </article>
</section>

<article *ngIf="showForm()" class="glass-card card-secondary form-panel">
  <div class="form-panel__header">
    <h2 class="text-xl font-semibold text-night-100">{{ submitLabel }} compañía</h2>
    <button class="btn-secondary" type="button" (click)="resetForm()">Cerrar</button>
  </div>

  <form class="login-form" [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-control">
      <label for="companyName">Nombre</label>
      <div class="input-wrapper">
        <input
          id="companyName"
          type="text"
          placeholder="HubCapture Inc."
          formControlName="companyName" />
      </div>
    </div>

    <div class="form-control">
      <label for="companyUrlProfile">URL corporativa</label>
      <div class="input-wrapper">
        <input
          id="companyUrlProfile"
          type="url"
          placeholder="https://hubcapture.com/about"
          formControlName="companyUrlProfile" />
      </div>
    </div>

    <div class="form-control">
      <label for="companySegment">Segmento</label>
      <div class="input-wrapper">
        <input
          id="companySegment"
          type="text"
          placeholder="Automatización industrial"
          formControlName="companySegment" />
      </div>
    </div>

    <div class="form-control">
      <label for="customerUrlProfile">URL cliente</label>
      <div class="input-wrapper">
        <input
          id="customerUrlProfile"
          type="url"
          placeholder="https://cliente.com/perfil"
          formControlName="customerUrlProfile" />
      </div>
    </div>

    <div class="form-control">
      <label for="companyIcp">ICP / Comentarios</label>
      <div class="input-wrapper textarea">
        <textarea
          id="companyIcp"
          rows="3"
          placeholder="Detalle del ICP o notas relevantes"
          formControlName="companyIcp"></textarea>
      </div>
    </div>

    <div class="form-control">
      <label for="creationDate">Fecha creación</label>
      <div class="input-wrapper">
        <input id="creationDate" type="date" formControlName="creationDate" />
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn-primary">{{ submitLabel }}</button>
      <button type="button" class="btn-secondary" (click)="resetForm()">Cancelar</button>
    </div>
  </form>
</article>
