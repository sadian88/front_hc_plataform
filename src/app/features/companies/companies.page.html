<section class="space-y-6">
  <header class="flex flex-wrap items-center justify-between gap-4">
    <div>
      <p class="text-sm uppercase tracking-wide text-night-500">Gestión</p>
      <h1 class="text-3xl font-semibold text-night-100">Compañías</h1>
      <p class="text-night-400">{{ statusMessage() }}</p>
    </div>
    <button class="btn-primary" type="button" (click)="startCreate()">
      Agregar compañía
    </button>
  </header>

  <article class="glass-card card-primary space-y-4">
    <p-table
      class="company-table"
      [value]="rowData()"
      [loading]="loading()"
      responsiveLayout="scroll"
      dataKey="id">
      <ng-template pTemplate="header">
        <tr>
          <th>Empresa</th>
          <th>Segmento</th>
          <th>Perfil corporativo</th>
          <th>Perfil cliente</th>
          <th>ICP</th>
          <th>ICP Pais</th>
          <th>ICP Tamano</th>
          <th>Creación</th>
          <th class="actions-column">Acciones</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-company>
        <tr>
          <td>
            <div class="flex flex-col">
              <span class="font-semibold text-night-100">{{ company.company_name }}</span>
              <small class="text-night-500">#{{ company.id }}</small>
            </div>
          </td>
          <td>
            <span class="pill">{{ company.company_segment || 'Sin segmento' }}</span>
          </td>
          <td>
            <a class="link" [href]="company.company_url_profile" target="_blank" rel="noopener">
              {{ company.company_url_profile }}
            </a>
          </td>
          <td>
            <a class="link" [href]="company.customer_url_profile" target="_blank" rel="noopener">
              {{ company.customer_url_profile || 'N/A' }}
            </a>
          </td>
          <td>
            <span class="text-secondary">{{ company.company_icp || 'N/A' }}</span>
          </td>
          <td>
            <span class="text-secondary">{{ company.icp_target_country || 'N/A' }}</span>
          </td>
          <td>
            <span class="text-secondary">{{ company.icp_company_size || 'N/A' }}</span>
          </td>
          <td>{{ company.creation_date || 'N/A' }}</td>
          <td class="actions-column">
            <button type="button" class="action-btn" (click)="viewUserInteractions(company)">
              Ver User Interactions
            </button>
            <button type="button" class="action-btn" (click)="viewCompanyProspectos(company)">
              Ver Company_Prospectos
            </button>
            <button type="button" class="action-btn" (click)="startEdit(company)">Editar</button>
            <button type="button" class="action-btn action-btn--danger" (click)="deleteCompany(company)">
              Eliminar
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </article>
</section>
